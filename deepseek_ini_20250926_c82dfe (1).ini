[SERVICE]
    Flush        5
    Daemon       off
    Log_Level    info
    Parsers_File parsers.conf
    HTTP_Server  On
    HTTP_Listen  0.0.0.0
    HTTP_Port    2020

[INPUT]
    Name              tail
    Tag               github.worker
    Path              /home/runner/_diag/worker*.log
    Multiline         On
    Parser_Firstline  github_worker_multiline
    Mem_Buf_Limit     50MB
    Skip_Long_Lines   On
    Refresh_Interval  10
    Rotate_Wait       30
    DB                /var/log/flb_github.db
    DB.Sync           Normal

[FILTER]
    Name          parser
    Match         github.worker
    Key_Name      log
    Parser        github_worker
    Reserve_Data  On

[OUTPUT]
    Name                cloudwatch_logs
    Match               github.worker
    Region              us-east-1
    Log_Group_Name      /github/actions/worker
    Log_Stream_Prefix   runner-
    Auto_Create_Group   true
    Retry_Limit         3